<!DOCTYPE html>
<html lang="es">
<head>
	<meta charset="UTF-8" />
	<title>MedReserva - Inicio</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<link rel="stylesheet" href="style.css" />
	<link href="https://fonts.googleapis.com/css2?family=Segoe+UI:wght@400;600&display=swap" rel="stylesheet">
	<script defer src="app.js"></script>
</head>
<body>
	<!-- NAV -->
	<nav>
		<a href="/" style="font-weight:bold; font-size:1.2em;">ü©∫ MedReserva</a>
		<button id="loginButton" onclick="openLoginModal()">Login</button>
		<button id="signupButton" onclick="openSignupModal()">Registrarse</button>
		<div id="userInfo" style="display:none;">
			<span id="userName"></span>
			<button onclick="logout()">Logout</button>
		</div>
	</nav>

	<!-- HERO SECTION -->
	<header class="hero" id="heroSection">
		<h1>Bienvenido a <span class="highlight">MedReserva</span></h1>
		<p>La forma m√°s r√°pida y segura de agendar tu cita m√©dica.</p>
	</header>

	<!-- HOW IT WORKS PARA USUARIOS AUTENTICADOS -->
	<section class="how-it-works" id="howItWorksLogged" style="display: none;">
		<h2>¬øC√≥mo funciona?</h2>
		<div id="howItWorksPatient" style="display: none;">
			<p><strong></strong> Accede a tu panel, revisa doctores disponibles, agenda tus citas y consulta tu historial m√©dico.</p>
		</div>
		<div id="howItWorksDoctor" style="display: none;">
			<p><strong></strong> Gestiona tu agenda, confirma o rechaza citas y mant√©n actualizado tu perfil profesional.</p>
		</div>
		<div id="howItWorksAdmin" style="display: none;">
			<p><strong></strong> Supervisa usuarios, gestiona doctores, pacientes y reservaciones.</p>
		</div>

		<div id="dashboardContainer" style="margin-top: 2em;">
    <!-- DASHBOARD ADMIN -->
    <div id="adminDashboard" style="display:none;">
      <section id="adminSearchSection" style="text-align: center; margin: 1.5em 0;">
        <label for="searchInput" style="font-weight: 600; font-size: 1.1em; margin-right: 0.5em;">Buscar:</label>
        <input type="text" id="searchInput" placeholder="Buscar en todas las tablas..." style="padding: 8px 14px; border-radius: 8px; border: 1.5px solid #444; width: 300px; max-width: 90%;">
      </section>

      <h3>Usuarios Registrados</h3>
      <div class="table-wrapper">
        <table id="usersTable" class="common-table" border="1" cellpadding="5" cellspacing="0" style="width: 100%; margin-bottom: 2em;">
          <thead>
            <tr>
              <th>Nombre</th>
              <th>Email</th>
              <th>Rol</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>

      <h3>Lista de Doctores</h3>
      <table id="doctorsTable" class="common-table" border="1" cellpadding="5" cellspacing="0" style="width: 100%; margin-bottom: 1.5em;">
        <thead>
          <tr>
            <th>Nombre</th>
            <th>Email</th>
            <th>Especialidad</th>
            <th>Tel√©fono</th>
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>

      <h3>Lista de Pacientes</h3>
      <table id="patientsTable" class="common-table" border="1" cellpadding="5" cellspacing="0" style="width: 100%;">
        <thead>
          <tr>
            <th>Nombre</th>
            <th>Email</th>
            <th>Tel√©fono</th>
            <th>Fecha de Nacimiento</th>
            <th>G√©nero</th>
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>

      <h3>Lista de Reservaciones</h3>
      <table id="reservationsTable" class="common-table" border="1" cellpadding="5" cellspacing="0" style="width: 100%;">
        <thead>
          <tr>
            <th>Paciente</th>
            <th>M√©dico</th>
            <th>Fecha</th>
            <th>Motivo</th>
            <th>Estado</th>
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>

    <!-- DASHBOARD DOCTOR -->
    <div id="doctorAppointmentsSection" style="display:none;">
      <h2 style="text-align: center; margin-bottom: 2em;">Mis Citas</h2>
      <table class="common-table" border="1" cellpadding="5" cellspacing="0" style="width: 100%;">
        <thead>
          <tr>
            <th>Paciente</th>
            <th>Contacto</th>
            <th>Motivo</th>
            <th>Fecha</th>
            <th>Estado</th>
          </tr>
        </thead>
        <tbody id="doctorAppointmentsTableBody"></tbody>
      </table>
    </div>
  </div>
  </section>

	<!-- Formulario de reserva si es paciente -->
	<div class="container" id="reservationContainer" style="display:none;">
		<h2 style="text-align:center; margin-bottom: 1em;">Agendar una cita</h2>
		<form id="reservationForm">
			<label for="dtime">Fecha y hora:</label>
			<input type="datetime-local" id="dtime" name="dtime" required>

			<label for="doctor">Selecciona un m√©dico:</label>
			<select id="doctorSelect" required>
        <option value="" disabled selected>Selecciona un m√©dico</option>
      </select>

			<label for="reason">Motivo / Comentario:</label>
			<textarea id="reason" name="reason" rows="3" placeholder="Motivo de la cita"></textarea>

			<button type="submit">Reservar</button>
		</form>
	</div>

	<!-- FOOTER -->
	<footer class="footer-links">
		<a href="#">Sobre nosotros</a>
		<a href="#">Contacto</a>
		<a href="#">T√©rminos</a>
		<a href="#">Soporte</a>
	</footer>

	<!-- Modales -->
	<!-- Login Modal -->
	<div id="loginModal" class="modal" style="display:none;">
		<div class="modal-content">
			<span class="close" onclick="closeLoginModal()">&times;</span>
			<h2>Iniciar Sesi√≥n</h2>
			<form id="loginForm">
				<label for="email">Correo:</label>
				<input type="email" id="loginEmail" name="email" required />
				<label for="password">Contrase√±a:</label>
				<input type="password" id="password" name="password" required />
				<button type="submit">Iniciar sesi√≥n</button>
			</form>
			<p id="loginMessage" style="color:red; margin-top: 1em;"></p>
		</div>
	</div>

	<!-- Signup Modal -->
	<div id="signupModal" class="modal" style="display:none;">
		<div class="modal-content">
			<span class="close" onclick="closeSignupModal()">&times;</span>
			<h2>Registro</h2>
			<form id="signupForm">
				<label for="signupRole">Tipo de usuario:</label>
				<select id="signupRole" name="role" required>
          <option value="">Selecciona un rol</option>
          <option value="patient">Paciente</option>
          <option value="doctor">M√©dico</option>
        </select>

				<label for="signupName">Nombre:</label>
				<input type="text" id="signupName" name="name" required>
				<label for="signupEmail">Correo:</label>
				<input type="email" id="signupEmail" name="email" required>
				<label for="signupPassword">Contrase√±a:</label>
				<input type="password" id="signupPassword" name="password" required>
				<label for="signupPhone">Tel√©fono:</label>
				<input type="text" id="signupPhone" name="phone">

				<div id="patientFields" style="display:none;">
					<label for="birthdate">Fecha de nacimiento:</label>
					<input type="date" id="birthdate" name="birthdate">
					<label for="gender">G√©nero:</label>
					<select id="gender" name="gender">
            <option value="">Selecciona</option>
            <option value="male">Masculino</option>
            <option value="female">Femenino</option>
            <option value="other">Otro</option>
          </select>
				</div>

				<div id="doctorFields" style="display:none;">
					<label for="specialty">Especialidad:</label>
					<input type="text" id="specialty" name="specialty">
				</div>

				<button type="submit">Registrarse</button>
			</form>
			<p id="signupMessage" style="margin-top:1em;"></p>
		</div>
	</div>
</body>
</html>